---
title: CVE-2024-50274
date: 2024-12-27 14:44:00
tags: [linux, cve]
---

# 基本信息

- CVE编号：CVE-2024-50274
- 
- 漏洞类型：UAF（Use-After-Free）

- 分配机构ID：416baaa9-dc9f-4396-8d5f-8c081fb06d67（Linux）

- 状态：已发布

- 保留日期：2024-10-21T19:36:19.983Z

- 发布日期：2024-11-19T01:30:13.973Z

- 更新日期：2024-11-19T01:30:13.973Z

# 描述

在Linux内核中，已解决的漏洞涉及`idpf_get_link_ksettings`函数。当设备控制平面被移除或重启时，驱动程序会检测到重置并释放资源，等待重置完成。如果重置失败，将采取错误路径并释放vport锁。此时，如果监控工具尝试访问链接设置，可能会尝试访问已释放的vport指针。
为了解决这个问题，将`link_speed_mbps`移动到`netdev_priv`结构中，以消除对vport指针和vport锁的依赖。同时，使用`netif_carrier_ok()`来检查链接状态，并调整`offsetof`以使用`link_up`代替`link_speed_mbps`。

# 影响范围

受影响的产品和版本

- 产品：Linux

- 受影响的文件：

- `drivers/net/ethernet/intel/idpf/idpf.h`

- `drivers/net/ethernet/intel/idpf/idpf_ethtool.c`

- `drivers/net/ethernet/intel/idpf/idpf_lib.c`

- `drivers/net/ethernet/intel/idpf/idpf_virtchnl.c`

- 受影响的Git版本：版本号`02cbfba1add5`，小于`fa4d906ad0fb`和`81d2fb4c7c18`的git版本受影响。

- 受影响的版本：6.7 - 6.11.8


# 修复参考

- 修复提交链接：

- [修复提交1](https://git.kernel.org/stable/c/81d2fb4c7c18a3b36ba3e00b9d5b753107472d75)

- [修复提交2](https://git.kernel.org/stable/c/fa4d906ad0fb63a980a1d586a061c78ea1a345ba)

