---
title: 计算机网络复习1-引言
date: 2023-06-21 14:14:08
tags: [计算机网络, 复习, 引言, 计网]
---
# 网络实例
## 网络分类

按地域规模
- 个域网PAN(Personal Area Network)
  - 范围10m以内，设备之间短距离通信的网络
- 局域网LAN(Local Area Network)
  - 局部地区形成的区域网络，如企业网络
- 家庭网络(Home Network)
  - 家庭中的LAN，智能家居
- 城域网(Metropolitan Area Network)
  - 覆盖一个城市的网络
- 广域网(Wide Area Network)
  - 覆盖地区很大的网络

## Internet与internet
|Internet（互联网）|internet（互连网）|
|----|----|
|特指遵循TCP/IP标准，利用路由器将各种计算机网络互联起来而形成的，覆盖全球的网络，是专有名词| 泛指由多个不同类型计算机网络互联而成的网路|
|使用TCP/IP|除了TCP/IP外还可以使用其他协议|


## 互连网的构成
### 网络边缘
- 端系统：位于互连网边缘与互连网相连的计算机和其他设备，如桌面计算机，服务器等

### 网络核心
- 由互联端系统的分组交换设备和通信链路构成的网状网络
- 目标：将海量的端系统互联
- 功能
  - 路由
    - 确定数据分组从源到目标所使用的路径
  - 转发
    - 路由器或交换机将接收到的数据分组转发出去
    - 确定转发出去的接口和链路  
- 数据发送方式
  - 电路交换
    - 面向连接，所以会预留资源
    - 连接建立之后，双方独占，资源专用，即使空闲也不与其他连接共享
    - 带宽大，效果好
    - 无法应对突发流量
    - 多路复用
      - FDM
      - TDM
  - 分组交换
    - 将每个p2p的数据流划分成组（packet）
    - 每个分组使用全部链路带宽
    - 无需预先分配，资源只有在必要时才使用
    - 原理
      - 在发送端把较长的报文划分成短的，固定长度的数据段
      - 每个数据段前面加上首部构成分组
      - 分组交换网络以“分组”作为数据传输单元
      - 一次把各分组发送到接收端
      - 分组首部很重要
        - 首部有地址等控制信息
        - 分组交换网中的节点交换机根据收到的分组首部中的地址信息，把分组转发到下一个节点交换机
        - 用这样的储存转发方式，最后分组就能到达最终目的地
      - 最后接收端把收到的数据恢复成原来的报文
    - 挑战
      - 在突发性数据传输过程中表现优异
      - 过度拥塞
        - 将导致分组延迟和丢失
        - 需要协议来保障可靠的数据传输

## 接入网
- 目标
  - 将主机连接到边缘路由器上
  - > 边缘路由器是端系统Host去往任何其他远程系统的路径上的第一台路由器
- 接入方式
  - 光纤到户FTTH（Fiber To The Home）
    - 带宽大、线路稳定
  - 数字用户线DSL（Digital Subscriber Line）
    - 电话线连接到数字用户线接入复用器
    - 上下行速率不对称，一般上行速度慢，下行速度快
  - 同轴电缆Cable
    - 利用传统有线电视信号线接入上网
    - 多个家庭可以共享
    - 上下行不对称
  - 无线接入
    - 无线局域网WLAN
      - 10m
    - 广域蜂窝接入网
      - 10km

# 物理介质
- 传输单位
  - bit
- 物理媒介
  - 引导型介质
    - 光纤
      - 高速运行
      - 低误码率，对电磁噪声免疫
    - 双绞线
      - 两根绝缘铜线互相缠绕
    - 同轴电缆
      - 两根同心铜导线，双向传输
  - 非引导型介质
    - 无线电
      - 不依赖介质
      - 半双工
    - 无线局域网
    - 无线广域网
    - 蓝牙
    - 地面微波
    - 卫星  

# 协议
> 网络协议
>
> 为`多方参与`的网络中的信息传递而建立的`约定和规范`

## 协议三要素
- 语法
  - 规定传输数据格式（如何讲）
- 语义
  - 规定所要完成的功能（讲什么）
- 时序
  - 规定各种操作的顺序（双方讲话的顺序）

以HTTP协议为例

语法就是HTTP请求格式

![_20230621050432.png](http://server.killuayz.top:8089/images/2023/06/21/_20230621050432.png)

语义则通过POST，GET等方法来体现

时序则通过客户端向服务端请求的顺序来体现

## 协议分层

### 协议分层结构
- 层次栈
  - 降低网络设计复杂性，每一层都使用下一层提供的服务，并为上一层提供服务
- 对等实体
  - 不同机器上构成相应层次的实体
- 接口
  - 每一对相邻层次之间的是接口，定义了下层向上层提供哪些`服务原语`
- 网络体系结构
  - 层和协议的集合为网络体系结构，一个特定的系统所使用的一组协议成为协议栈

![_20230621053212.png](http://server.killuayz.top:8089/images/2023/06/21/_20230621053212.png)

发送端：层层封装

接收端：层层解封

![_20230621053412.png](http://server.killuayz.top:8089/images/2023/06/21/_20230621053412.png)


## 服务原语
- 面向连接的服务
  - 只要有请求，都会有回应
- 面向无连接的服务
  - 不管对方是否接收到
- 区别
  - 面向连接服务有连接建立，数据传输和连接释放三个阶段，是可靠的
  - 无连接服务在通信之前不需要建立连接，双方都只是尽力而为，是一种不可靠的服务

## 服务与协议的关系
- 协议是水平的，服务是垂直的
- 通过协议来定义服务
- 通过接口来实现服务的使用

# 参考模型
## OSI参考模型
- 物理层
  - 定义如何在信道上传输0、1
  - 考虑设备的机械接口，电子信号，时序接口，介质等
- 数据链路层
  - 实现相邻网络实体间的数据传输
  - 成帧：从物理层的比特流中提取出完整的帧
  - 错误检测与纠正
  - 流量控制
  - 共享信道上的访问控制（MAC）：同一个信道，同时传输信号
- 网络层
  - 将数据包跨越网络从源设备发送到目的设备
  - 路由：在网络中选取从源端到目的端转发路径
  - 路由协议
  - 服务质量控制（QoS），包括处理网络拥塞、负载均衡、准入控制、保障延迟等
- 传输层
  - 将数据从源端口发送到目的端口（进程到进程）
  - 可靠传输
    - 对通信质量有要求的应用场景，如文件传输
  - 不可靠传输
    - 对通信质量要求不高，但对通信响应速度要求高的应用场景，如语音通话
- 会话层
- 表示层
- 应用层
  - 提供应用程序便捷的网络服务调用 


> Check in:
>
> 为何在唯一的MAC地址之外，还需要唯一的IP地址？
>
> 为了屏蔽硬件差异和提高灵活性
> 
> MAC地址和IP地址都是用来标识连接到网络中的计算机，但是它们的作用不同。MAC地址是在数据链路层使用的，用于标识网络中唯一的设备，而IP地址是在网络层使用的，用于标识网络中唯一的主机。MAC地址只能在一个局域网内使用，而IP地址可以在不同的网络里，甚至同一个网络的不同时期不同.
> 
> 因此，如果只是在一个局域网内通信，只用MAC地址就可以了。但是如果要跨越多个局域网进行通信，就必须使用IP地址了。


## TCP/IP参考模型
- 链路层
- 互联网层
- 传输层
- 应用层

特点
- 核心简单，边缘复杂。摒弃“笨终端&聪明网络”的设计思路，采用“聪明终端&简单网络”的设计方式，由端系统负责丢失恢复等
- 实现了建立在简单的、不可靠部件上的可靠系统

## OSI与TCP/IP模型比较
层次不同
- OSI有7层，TCP/IP有4层

基本思想
- OSI：先有模型后设计协议，不局限于特定协议，明确了服务、协议、接口等，更据通用性
- TCP/IP：仅仅对已有协议的描述

无连接与面向连接
- OSI支持无连接和面向连接通信
- TCP/IP的网络层仅支持无连接通信


## OSI与TCP/IP的不足
|OSI|TCP/IP|
|--|--|
|从未被真正实现|核心概念未能实现|
|技术实现糟糕分层欠缺技术考虑，分层间功能重复|不具备通用性|
|OSI被认为是政府和机构的强加标准|混用接口与分层的设计|
||模型欠缺完整性|

## 教程模型
为了突出核心概念，区分接口与分层，体现完整性和通用性，简化分层易于学习，我们采用以下分层模型：

||
|:--:|
|应用层|
|传输层|
|网络层|
|数据链路层|
|物理层|


# 计算机网络度量单位

- 比特率
  - 主机在数字信道上传送数据的速率
  - bps, kbps, mbps, gbps
- 带宽
  - 网络中某通道传送数据的能力，即单位时间内网络中的某信道能通过的`最高数据率`
  - bit/s 
- 包转发率（PPS）
  - 交换机或路由器等网络设备以包为单位的转发速率
  - 线速转发：交换机端口在满负载的情况下，对帧进行转发时能够达到该端口线路的最高速度

> Check in
>
> 在交换机上，大包和小包那个更容易实现线速？
>
> 大包更容易实现线速转发。
> 
> 线速转发：交换机端口在满负载的情况下，对帧进行转发时能够达到该端口线路的最高速度。
> 
> 考验转发能力以能够处理最小包长来衡量，对于以太网最小包为64BYTE，加上帧开销20BYTE，因此最小包为84BYTE。
> 
> 对于1个全双工1000Mbps接口达到线速时要求：转发能力＝1000Mbps/((64+20)*8bit)＝1.488Mpps
> 
> 对于1个全双工100Mbps接口达到线速时要求：转发能力＝100Mbps/((64+20)*8bit)＝0.149Mpps
> 
> 对于带宽为B的路由器，如果包大小为P，要实现线速需要的最小包转发率为 B/P，当P越大时，对包转发率的要求越小，越容易实现。


- 时延
  - `传输时延`
    - 数据从节点进入到传输媒体所需要的时间
    - $d_{trans} = \frac{Length(bit)}{R(bit/s)}$
  - `传播时延`
    - 电磁波在信道中需要传播一定距离而花费的时间
    - $d_{prop} = \frac{Distance(m)}{c(m/s)}$
  - 处理时延
    - 主机或路由器在收到分组时，为处理分组所花费的时间
  - 排队时延
    - 分组在路由器输出队列中排队等待处理所经历的时延

- RTT 往返时延
  - 从发送方发送数据开始，到发送方收到来自接收方的确认为止，经历的`总时间`
  - RTT = 2 * （传播时延+传输时延+排队时延）
- 时延带宽积
  - 时延带宽积 = 传播时延 * 带宽
  - 描述的是，若发送方连续发送数据，则在发送的第一个bit即将到达重点时，发送端就已经发送了时延带宽积个bit，而这些bit都在链路上向前移动

![_20230621081111.png](http://server.killuayz.top:8089/images/2023/06/21/_20230621081111.png)

- 吞吐量
  - 单位时间内通过某个网络的数据量，b/s
- 有效吞吐量
  - 单位时间内，目的地正确介绍到的有用信息的数目
- 利用率
  - 信道利用率：某信道有百分之几的时间时被利用的
  - 网络利用率：网络中所有信道利用率的加权平均
- 丢包率
  - 所丢失的数据包栈所发送数据包的数量的比率
- 时延抖动
  - 网络的队列或缓冲难以预测，所以整体时延会有抖动
- 延迟丢包
  - 多媒体应用中，由于数据包延迟到达，接收端往往需要丢弃失去价值的包




